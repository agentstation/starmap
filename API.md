# Starmap API Reference

> Auto-generated API documentation for the Starmap Go package

This document provides a complete API reference for Starmap's public interfaces. For architectural details and design patterns, see [ARCHITECTURE.md](ARCHITECTURE.md). For usage examples and getting started, see [README.md](README.md).

## Quick Navigation

- [Client Interface](#client) - Main entry point
- [Catalog Operations](#catalog) - Catalog access
- [Sync and Updates](#updater) - Data synchronization
- [Event Hooks](#hooks) - Model change callbacks
- [Auto Updates](#autoupdater) - Automatic catalog updates
- [Configuration Options](#option) - Functional options
- [Persistence](#persistence) - Catalog persistence

---

<!-- gomarkdoc:embed:start -->

<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# starmap

```go
import "github.com/agentstation/starmap"
```

Package starmap provides the main entry point for the Starmap AI model catalog system. It offers a high\-level interface for managing AI model catalogs with automatic updates, event hooks, and provider synchronization capabilities.

Starmap wraps the underlying catalog system with additional features including: \- Automatic background synchronization with provider APIs \- Event hooks for model changes \(added, updated, removed\) \- Thread\-safe catalog access with copy\-on\-read semantics \- Flexible configuration through functional options \- Support for multiple data sources and merge strategies

Example usage:

```
// Create a starmap instance with default settings
sm, err := starmap.New()
if err != nil {
    log.Fatal(err)
}
defer sm.AutoUpdatesOff()

// Register event hooks
sm.OnModelAdded(func(model catalogs.Model) {
    log.Printf("New model: %s", model.ID)
})

// Get catalog (returns a copy for thread safety)
catalog, err := sm.Catalog()
if err != nil {
    log.Fatal(err)
}

// Access models
models := catalog.Models()
for _, model := range models.List() {
    fmt.Printf("Model: %s - %s\n", model.ID, model.Name)
}

// Manually trigger sync
result, err := sm.Sync(ctx, WithProviders("openai", "anthropic"))
if err != nil {
    log.Fatal(err)
}

// Configure with custom options
sm, err = starmap.New(
    WithAutoUpdateInterval(30 * time.Minute),
    WithLocalPath("./custom-catalog"),
    WithAutoUpdates(true),
)
```

Package starmap provides a unified AI model catalog system with automatic updates, event hooks, and support for multiple storage backends.

## Index

- [type AutoUpdateFunc](<#AutoUpdateFunc>)
- [type AutoUpdater](<#AutoUpdater>)
- [type Catalog](<#Catalog>)
- [type Client](<#Client>)
  - [func New\(opts ...Option\) \(Client, error\)](<#New>)
- [type Hooks](<#Hooks>)
- [type ModelAddedHook](<#ModelAddedHook>)
- [type ModelRemovedHook](<#ModelRemovedHook>)
- [type ModelUpdatedHook](<#ModelUpdatedHook>)
- [type Option](<#Option>)
  - [func WithAutoUpdateFunc\(fn AutoUpdateFunc\) Option](<#WithAutoUpdateFunc>)
  - [func WithAutoUpdateInterval\(interval time.Duration\) Option](<#WithAutoUpdateInterval>)
  - [func WithAutoUpdatesDisabled\(\) Option](<#WithAutoUpdatesDisabled>)
  - [func WithEmbeddedCatalog\(\) Option](<#WithEmbeddedCatalog>)
  - [func WithLocalPath\(path string\) Option](<#WithLocalPath>)
  - [func WithRemoteServer\(url string, apiKey \*string\) Option](<#WithRemoteServer>)
  - [func WithRemoteServerOnly\(\) Option](<#WithRemoteServerOnly>)
- [type Persistence](<#Persistence>)
- [type Updater](<#Updater>)


<a name="AutoUpdateFunc"></a>
## type [AutoUpdateFunc](<https://github.com/agentstation/starmap/blob/master/options.go#L98>)

AutoUpdateFunc is a function that updates the catalog.

```go
type AutoUpdateFunc func(catalogs.Catalog) (catalogs.Catalog, error)
```

<a name="AutoUpdater"></a>
## type [AutoUpdater](<https://github.com/agentstation/starmap/blob/master/autoupdate.go#L17-L23>)

AutoUpdater provides controls for automatic catalog updates.

```go
type AutoUpdater interface {
    // AutoUpdatesOn begins automatic updates if configured
    AutoUpdatesOn() error

    // AutoUpdatesOff stops automatic updates
    AutoUpdatesOff() error
}
```

<a name="Catalog"></a>
## type [Catalog](<https://github.com/agentstation/starmap/blob/master/client.go#L66-L68>)

Catalog provides copy\-on\-read access to the catalog.

```go
type Catalog interface {
    Catalog() (catalogs.Catalog, error)
}
```

<a name="Client"></a>
## type [Client](<https://github.com/agentstation/starmap/blob/master/client.go#L79-L95>)

Client manages a catalog with automatic updates and event hooks.

```go
type Client interface {

    // Catalog provides copy-on-read access to the catalog
    Catalog

    // Updater handles catalog update and sync operations
    Updater

    // Persistence handles catalog persistence operations
    Persistence

    // AutoUpdater provides access to automatic update controls
    AutoUpdater

    // Hooks provides access to event callback registration
    Hooks
}
```

<a name="New"></a>
### func [New](<https://github.com/agentstation/starmap/blob/master/client.go#L119>)

```go
func New(opts ...Option) (Client, error)
```

New creates a new Client instance with the given options.

<a name="Hooks"></a>
## type [Hooks](<https://github.com/agentstation/starmap/blob/master/hooks.go#L14-L23>)

Hooks provides event callback registration for catalog changes.

```go
type Hooks interface {
    // OnModelAdded registers a callback for when models are added
    OnModelAdded(ModelAddedHook)

    // OnModelUpdated registers a callback for when models are updated
    OnModelUpdated(ModelUpdatedHook)

    // OnModelRemoved registers a callback for when models are removed
    OnModelRemoved(ModelRemovedHook)
}
```

<a name="ModelAddedHook"></a>
## type [ModelAddedHook](<https://github.com/agentstation/starmap/blob/master/hooks.go#L28>)

ModelAddedHook is called when a model is added to the catalog.

```go
type ModelAddedHook func(model catalogs.Model)
```

<a name="ModelRemovedHook"></a>
## type [ModelRemovedHook](<https://github.com/agentstation/starmap/blob/master/hooks.go#L34>)

ModelRemovedHook is called when a model is removed from the catalog.

```go
type ModelRemovedHook func(model catalogs.Model)
```

<a name="ModelUpdatedHook"></a>
## type [ModelUpdatedHook](<https://github.com/agentstation/starmap/blob/master/hooks.go#L31>)

ModelUpdatedHook is called when a model is updated in the catalog.

```go
type ModelUpdatedHook func(old, updated catalogs.Model)
```

<a name="Option"></a>
## type [Option](<https://github.com/agentstation/starmap/blob/master/options.go#L51>)

Option is a function that configures a Starmap instance.

```go
type Option func(*options) error
```

<a name="WithAutoUpdateFunc"></a>
### func [WithAutoUpdateFunc](<https://github.com/agentstation/starmap/blob/master/options.go#L101>)

```go
func WithAutoUpdateFunc(fn AutoUpdateFunc) Option
```

WithAutoUpdateFunc configures a custom function for updating the catalog.

<a name="WithAutoUpdateInterval"></a>
### func [WithAutoUpdateInterval](<https://github.com/agentstation/starmap/blob/master/options.go#L90>)

```go
func WithAutoUpdateInterval(interval time.Duration) Option
```

WithAutoUpdateInterval configures how often to automatically update the catalog.

<a name="WithAutoUpdatesDisabled"></a>
### func [WithAutoUpdatesDisabled](<https://github.com/agentstation/starmap/blob/master/options.go#L82>)

```go
func WithAutoUpdatesDisabled() Option
```

WithAutoUpdatesDisabled configures whether automatic updates are disabled.

<a name="WithEmbeddedCatalog"></a>
### func [WithEmbeddedCatalog](<https://github.com/agentstation/starmap/blob/master/options.go#L126>)

```go
func WithEmbeddedCatalog() Option
```

WithEmbeddedCatalog configures whether to use an embedded catalog. It defaults to false, but takes precedence over WithLocalPath if set.

<a name="WithLocalPath"></a>
### func [WithLocalPath](<https://github.com/agentstation/starmap/blob/master/options.go#L117>)

```go
func WithLocalPath(path string) Option
```

WithLocalPath configures the local source to use a specific catalog path.

<a name="WithRemoteServer"></a>
### func [WithRemoteServer](<https://github.com/agentstation/starmap/blob/master/options.go#L65>)

```go
func WithRemoteServer(url string, apiKey *string) Option
```

WithRemoteServer configures the remote server for catalog updates. A url is required, an api key can be provided for authentication, otherwise use nil to skip Bearer token authentication.

<a name="WithRemoteServerOnly"></a>
### func [WithRemoteServerOnly](<https://github.com/agentstation/starmap/blob/master/options.go#L74>)

```go
func WithRemoteServerOnly() Option
```

WithRemoteServerOnly configures whether to only use the remote server and not hit provider APIs.

<a name="Persistence"></a>
## type [Persistence](<https://github.com/agentstation/starmap/blob/master/persistence.go#L12-L15>)

Persistence handles catalog persistence operations.

```go
type Persistence interface {
    // Save with options
    Save(opts ...save.Option) error
}
```

<a name="Updater"></a>
## type [Updater](<https://github.com/agentstation/starmap/blob/master/update.go#L23-L29>)

Updater handles catalog synchronization operations.

```go
type Updater interface {
    // Sync synchronizes the catalog with provider APIs
    Sync(ctx context.Context, opts ...sync.Option) (*sync.Result, error)

    // Update manually triggers a catalog update
    Update(ctx context.Context) error
}
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)


<!-- gomarkdoc:embed:end -->
