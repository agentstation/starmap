# transport

Internal package transport provides HTTP client utilities and transport layers.

<!-- gomarkdoc:embed:start -->

<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# transport

```go
import "github.com/agentstation/starmap/internal/transport"
```

## Index

- [Variables](<#variables>)
- [func DecodeResponse\(resp \*http.Response, target any\) error](<#DecodeResponse>)
- [type Authenticator](<#Authenticator>)
- [type BearerAuth](<#BearerAuth>)
  - [func \(a \*BearerAuth\) Apply\(req \*http.Request, apiKey string\)](<#BearerAuth.Apply>)
- [type Client](<#Client>)
  - [func New\(auth Authenticator\) \*Client](<#New>)
  - [func NewForProvider\(provider \*catalogs.Provider\) \*Client](<#NewForProvider>)
  - [func \(c \*Client\) Do\(req \*http.Request, provider \*catalogs.Provider\) \(\*http.Response, error\)](<#Client.Do>)
  - [func \(c \*Client\) DoWithContext\(\_ context.Context, req \*http.Request, provider \*catalogs.Provider\) \(\*http.Response, error\)](<#Client.DoWithContext>)
  - [func \(c \*Client\) Get\(ctx context.Context, url string, provider \*catalogs.Provider\) \(\*http.Response, error\)](<#Client.Get>)
- [type HeaderAuth](<#HeaderAuth>)
  - [func \(a \*HeaderAuth\) Apply\(req \*http.Request, apiKey string\)](<#HeaderAuth.Apply>)
- [type NoAuth](<#NoAuth>)
  - [func \(a \*NoAuth\) Apply\(\_ \*http.Request, \_ string\)](<#NoAuth.Apply>)
- [type ProviderAuth](<#ProviderAuth>)
  - [func \(a \*ProviderAuth\) Apply\(req \*http.Request, apiKey string\)](<#ProviderAuth.Apply>)
- [type QueryAuth](<#QueryAuth>)
  - [func \(a \*QueryAuth\) Apply\(req \*http.Request, apiKey string\)](<#QueryAuth.Apply>)
- [type RequestBuilder](<#RequestBuilder>)
  - [func NewRequestBuilder\(provider \*catalogs.Provider\) \*RequestBuilder](<#NewRequestBuilder>)
  - [func \(rb \*RequestBuilder\) AddProviderHeaders\(req \*http.Request\)](<#RequestBuilder.AddProviderHeaders>)
  - [func \(rb \*RequestBuilder\) GetBaseURL\(\) string](<#RequestBuilder.GetBaseURL>)
  - [func \(rb \*RequestBuilder\) GetModelsURL\(defaultURL string\) string](<#RequestBuilder.GetModelsURL>)


## Variables

<a name="DefaultHTTPTimeout"></a>DefaultHTTPTimeout is the default timeout for HTTP requests.

```go
var DefaultHTTPTimeout = constants.DefaultHTTPTimeout
```

<a name="DecodeResponse"></a>
## func [DecodeResponse](<https://github.com/agentstation/starmap/blob/master/internal/transport/request.go#L52>)

```go
func DecodeResponse(resp *http.Response, target any) error
```

DecodeResponse decodes a JSON response into the target structure.

<a name="Authenticator"></a>
## type [Authenticator](<https://github.com/agentstation/starmap/blob/master/internal/transport/auth.go#L10-L12>)

Authenticator applies authentication to HTTP requests.

```go
type Authenticator interface {
    Apply(req *http.Request, apiKey string)
}
```

<a name="BearerAuth"></a>
## type [BearerAuth](<https://github.com/agentstation/starmap/blob/master/internal/transport/auth.go#L23>)

BearerAuth implements Bearer token authentication.

```go
type BearerAuth struct{}
```

<a name="BearerAuth.Apply"></a>
### func \(\*BearerAuth\) [Apply](<https://github.com/agentstation/starmap/blob/master/internal/transport/auth.go#L26>)

```go
func (a *BearerAuth) Apply(req *http.Request, apiKey string)
```

Apply implements the Authenticator interface for BearerAuth.

<a name="Client"></a>
## type [Client](<https://github.com/agentstation/starmap/blob/master/internal/transport/client.go#L16-L19>)

Client provides HTTP client functionality with authentication.

```go
type Client struct {
    // contains filtered or unexported fields
}
```

<a name="New"></a>
### func [New](<https://github.com/agentstation/starmap/blob/master/internal/transport/client.go#L22>)

```go
func New(auth Authenticator) *Client
```

New creates a new transport client with the specified authenticator.

<a name="NewForProvider"></a>
### func [NewForProvider](<https://github.com/agentstation/starmap/blob/master/internal/transport/client.go#L30>)

```go
func NewForProvider(provider *catalogs.Provider) *Client
```

NewForProvider creates a transport client configured for a specific provider.

<a name="Client.Do"></a>
### func \(\*Client\) [Do](<https://github.com/agentstation/starmap/blob/master/internal/transport/client.go#L36>)

```go
func (c *Client) Do(req *http.Request, provider *catalogs.Provider) (*http.Response, error)
```

Do performs an HTTP request with authentication applied.

<a name="Client.DoWithContext"></a>
### func \(\*Client\) [DoWithContext](<https://github.com/agentstation/starmap/blob/master/internal/transport/client.go#L41>)

```go
func (c *Client) DoWithContext(_ context.Context, req *http.Request, provider *catalogs.Provider) (*http.Response, error)
```

DoWithContext performs an HTTP request with authentication applied and context support.

<a name="Client.Get"></a>
### func \(\*Client\) [Get](<https://github.com/agentstation/starmap/blob/master/internal/transport/client.go#L72>)

```go
func (c *Client) Get(ctx context.Context, url string, provider *catalogs.Provider) (*http.Response, error)
```

Get performs a GET request.

<a name="HeaderAuth"></a>
## type [HeaderAuth](<https://github.com/agentstation/starmap/blob/master/internal/transport/auth.go#L31-L33>)

HeaderAuth implements custom header authentication.

```go
type HeaderAuth struct {
    Header string
}
```

<a name="HeaderAuth.Apply"></a>
### func \(\*HeaderAuth\) [Apply](<https://github.com/agentstation/starmap/blob/master/internal/transport/auth.go#L36>)

```go
func (a *HeaderAuth) Apply(req *http.Request, apiKey string)
```

Apply implements the Authenticator interface for HeaderAuth.

<a name="NoAuth"></a>
## type [NoAuth](<https://github.com/agentstation/starmap/blob/master/internal/transport/auth.go#L15>)

NoAuth implements no authentication.

```go
type NoAuth struct{}
```

<a name="NoAuth.Apply"></a>
### func \(\*NoAuth\) [Apply](<https://github.com/agentstation/starmap/blob/master/internal/transport/auth.go#L18>)

```go
func (a *NoAuth) Apply(_ *http.Request, _ string)
```

Apply implements the Authenticator interface for NoAuth.

<a name="ProviderAuth"></a>
## type [ProviderAuth](<https://github.com/agentstation/starmap/blob/master/internal/transport/auth.go#L58-L60>)

ProviderAuth implements provider\-specific authentication using catalog configuration.

```go
type ProviderAuth struct {
    Provider *catalogs.Provider
}
```

<a name="ProviderAuth.Apply"></a>
### func \(\*ProviderAuth\) [Apply](<https://github.com/agentstation/starmap/blob/master/internal/transport/auth.go#L63>)

```go
func (a *ProviderAuth) Apply(req *http.Request, apiKey string)
```

Apply implements the Authenticator interface for ProviderAuth.

<a name="QueryAuth"></a>
## type [QueryAuth](<https://github.com/agentstation/starmap/blob/master/internal/transport/auth.go#L41-L43>)

QueryAuth implements API key as query parameter authentication.

```go
type QueryAuth struct {
    Param string
}
```

<a name="QueryAuth.Apply"></a>
### func \(\*QueryAuth\) [Apply](<https://github.com/agentstation/starmap/blob/master/internal/transport/auth.go#L46>)

```go
func (a *QueryAuth) Apply(req *http.Request, apiKey string)
```

Apply implements the Authenticator interface for QueryAuth.

<a name="RequestBuilder"></a>
## type [RequestBuilder](<https://github.com/agentstation/starmap/blob/master/internal/transport/request.go#L14-L16>)

RequestBuilder helps build HTTP requests with provider\-specific configurations.

```go
type RequestBuilder struct {
    // contains filtered or unexported fields
}
```

<a name="NewRequestBuilder"></a>
### func [NewRequestBuilder](<https://github.com/agentstation/starmap/blob/master/internal/transport/request.go#L19>)

```go
func NewRequestBuilder(provider *catalogs.Provider) *RequestBuilder
```

NewRequestBuilder creates a new request builder for a provider.

<a name="RequestBuilder.AddProviderHeaders"></a>
### func \(\*RequestBuilder\) [AddProviderHeaders](<https://github.com/agentstation/starmap/blob/master/internal/transport/request.go#L40>)

```go
func (rb *RequestBuilder) AddProviderHeaders(req *http.Request)
```

AddProviderHeaders adds provider\-specific headers to a request.

<a name="RequestBuilder.GetBaseURL"></a>
### func \(\*RequestBuilder\) [GetBaseURL](<https://github.com/agentstation/starmap/blob/master/internal/transport/request.go#L24>)

```go
func (rb *RequestBuilder) GetBaseURL() string
```

GetBaseURL returns the base URL for API requests.

<a name="RequestBuilder.GetModelsURL"></a>
### func \(\*RequestBuilder\) [GetModelsURL](<https://github.com/agentstation/starmap/blob/master/internal/transport/request.go#L32>)

```go
func (rb *RequestBuilder) GetModelsURL(defaultURL string) string
```

GetModelsURL returns the URL for listing models.

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)


<!-- gomarkdoc:embed:end -->
