<!-- gomarkdoc:embed:start -->

<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# middleware

```go
import "github.com/agentstation/starmap/internal/server/middleware"
```

Package middleware provides HTTP middleware for the Starmap API server. It includes logging, recovery, CORS, authentication, and rate limiting.

## Index

- [func Auth\(config AuthConfig, logger \*zerolog.Logger\) func\(http.Handler\) http.Handler](<#Auth>)
- [func CORS\(config CORSConfig\) func\(http.Handler\) http.Handler](<#CORS>)
- [func Chain\(middlewares ...func\(http.Handler\) http.Handler\) func\(http.Handler\) http.Handler](<#Chain>)
- [func Logger\(logger \*zerolog.Logger\) func\(http.Handler\) http.Handler](<#Logger>)
- [func RateLimit\(rl \*RateLimiter\) func\(http.Handler\) http.Handler](<#RateLimit>)
- [func Recovery\(logger \*zerolog.Logger\) func\(http.Handler\) http.Handler](<#Recovery>)
- [type AuthConfig](<#AuthConfig>)
  - [func DefaultAuthConfig\(\) AuthConfig](<#DefaultAuthConfig>)
- [type CORSConfig](<#CORSConfig>)
  - [func DefaultCORSConfig\(\) CORSConfig](<#DefaultCORSConfig>)
- [type RateLimiter](<#RateLimiter>)
  - [func NewRateLimiter\(limit int, logger \*zerolog.Logger\) \*RateLimiter](<#NewRateLimiter>)


<a name="Auth"></a>
## func [Auth](<https://github.com/agentstation/starmap/blob/master/internal/server/middleware/auth.go#L32>)

```go
func Auth(config AuthConfig, logger *zerolog.Logger) func(http.Handler) http.Handler
```

Auth middleware validates API keys for protected endpoints.

<a name="CORS"></a>
## func [CORS](<https://github.com/agentstation/starmap/blob/master/internal/server/middleware/cors.go#L27>)

```go
func CORS(config CORSConfig) func(http.Handler) http.Handler
```

CORS middleware adds CORS headers to responses.

<a name="Chain"></a>
## func [Chain](<https://github.com/agentstation/starmap/blob/master/internal/server/middleware/middleware.go#L13>)

```go
func Chain(middlewares ...func(http.Handler) http.Handler) func(http.Handler) http.Handler
```

Chain combines multiple middleware functions into a single middleware.

<a name="Logger"></a>
## func [Logger](<https://github.com/agentstation/starmap/blob/master/internal/server/middleware/middleware.go#L23>)

```go
func Logger(logger *zerolog.Logger) func(http.Handler) http.Handler
```

Logger logs HTTP requests with structured logging.

<a name="RateLimit"></a>
## func [RateLimit](<https://github.com/agentstation/starmap/blob/master/internal/server/middleware/ratelimit.go#L107>)

```go
func RateLimit(rl *RateLimiter) func(http.Handler) http.Handler
```

RateLimit middleware limits requests per IP address.

<a name="Recovery"></a>
## func [Recovery](<https://github.com/agentstation/starmap/blob/master/internal/server/middleware/middleware.go#L57>)

```go
func Recovery(logger *zerolog.Logger) func(http.Handler) http.Handler
```

Recovery recovers from panics and returns 500 error.

<a name="AuthConfig"></a>
## type [AuthConfig](<https://github.com/agentstation/starmap/blob/master/internal/server/middleware/auth.go#L12-L18>)

AuthConfig holds authentication configuration.

```go
type AuthConfig struct {
    Enabled      bool
    APIKey       string
    HeaderName   string
    PublicPaths  []string
    BearerPrefix bool
}
```

<a name="DefaultAuthConfig"></a>
### func [DefaultAuthConfig](<https://github.com/agentstation/starmap/blob/master/internal/server/middleware/auth.go#L21>)

```go
func DefaultAuthConfig() AuthConfig
```

DefaultAuthConfig returns default authentication configuration.

<a name="CORSConfig"></a>
## type [CORSConfig](<https://github.com/agentstation/starmap/blob/master/internal/server/middleware/cors.go#L9-L14>)

CORSConfig holds CORS configuration.

```go
type CORSConfig struct {
    AllowedOrigins []string
    AllowedMethods []string
    AllowedHeaders []string
    AllowAll       bool
}
```

<a name="DefaultCORSConfig"></a>
### func [DefaultCORSConfig](<https://github.com/agentstation/starmap/blob/master/internal/server/middleware/cors.go#L17>)

```go
func DefaultCORSConfig() CORSConfig
```

DefaultCORSConfig returns the default CORS configuration.

<a name="RateLimiter"></a>
## type [RateLimiter](<https://github.com/agentstation/starmap/blob/master/internal/server/middleware/ratelimit.go#L12-L18>)

RateLimiter implements token bucket rate limiting per IP address.

```go
type RateLimiter struct {
    // contains filtered or unexported fields
}
```

<a name="NewRateLimiter"></a>
### func [NewRateLimiter](<https://github.com/agentstation/starmap/blob/master/internal/server/middleware/ratelimit.go#L29>)

```go
func NewRateLimiter(limit int, logger *zerolog.Logger) *RateLimiter
```

NewRateLimiter creates a new rate limiter. limit is requests per minute per IP.

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)


<!-- gomarkdoc:embed:end -->