<!-- gomarkdoc:embed:start -->

<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# sse

```go
import "github.com/agentstation/starmap/internal/server/sse"
```

Package sse provides Server\-Sent Events support for real\-time updates.

## Index

- [type Broadcaster](<#Broadcaster>)
  - [func NewBroadcaster\(logger \*zerolog.Logger\) \*Broadcaster](<#NewBroadcaster>)
  - [func \(b \*Broadcaster\) Broadcast\(event Event\)](<#Broadcaster.Broadcast>)
  - [func \(b \*Broadcaster\) ClientCount\(\) int](<#Broadcaster.ClientCount>)
  - [func \(b \*Broadcaster\) Run\(ctx context.Context\)](<#Broadcaster.Run>)
  - [func \(b \*Broadcaster\) ServeHTTP\(w http.ResponseWriter, r \*http.Request\)](<#Broadcaster.ServeHTTP>)
- [type Event](<#Event>)


<a name="Broadcaster"></a>
## type [Broadcaster](<https://github.com/agentstation/starmap/blob/master/internal/server/sse/broadcaster.go#L16-L23>)

Broadcaster manages Server\-Sent Events connections.

```go
type Broadcaster struct {
    // contains filtered or unexported fields
}
```

<a name="NewBroadcaster"></a>
### func [NewBroadcaster](<https://github.com/agentstation/starmap/blob/master/internal/server/sse/broadcaster.go#L26>)

```go
func NewBroadcaster(logger *zerolog.Logger) *Broadcaster
```

NewBroadcaster creates a new SSE broadcaster.

<a name="Broadcaster.Broadcast"></a>
### func \(\*Broadcaster\) [Broadcast](<https://github.com/agentstation/starmap/blob/master/internal/server/sse/broadcaster.go#L85>)

```go
func (b *Broadcaster) Broadcast(event Event)
```

Broadcast sends an event to all connected SSE clients.

<a name="Broadcaster.ClientCount"></a>
### func \(\*Broadcaster\) [ClientCount](<https://github.com/agentstation/starmap/blob/master/internal/server/sse/broadcaster.go#L94>)

```go
func (b *Broadcaster) ClientCount() int
```

ClientCount returns the number of connected SSE clients.

<a name="Broadcaster.Run"></a>
### func \(\*Broadcaster\) [Run](<https://github.com/agentstation/starmap/blob/master/internal/server/sse/broadcaster.go#L38>)

```go
func (b *Broadcaster) Run(ctx context.Context)
```

Run starts the broadcaster's main loop. Should be called in a goroutine. The broadcaster will run until the context is cancelled.

<a name="Broadcaster.ServeHTTP"></a>
### func \(\*Broadcaster\) [ServeHTTP](<https://github.com/agentstation/starmap/blob/master/internal/server/sse/broadcaster.go#L101>)

```go
func (b *Broadcaster) ServeHTTP(w http.ResponseWriter, r *http.Request)
```

ServeHTTP handles SSE connections.

<a name="Event"></a>
## type [Event](<https://github.com/agentstation/starmap/blob/master/internal/server/sse/broadcaster.go#L173-L177>)

Event represents an SSE event.

```go
type Event struct {
    Event string `json:"event,omitempty"` // Event type (optional)
    ID    string `json:"id,omitempty"`    // Event ID (optional)
    Data  any    `json:"data"`            // Event data
}
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)


<!-- gomarkdoc:embed:end -->