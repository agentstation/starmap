<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# handlers

```go
import "github.com/agentstation/starmap/internal/server/handlers"
```

Package handlers provides HTTP request handlers for the Starmap API.

Handlers are organized by domain for maintainability:

- models.go: Model listing, retrieval, and search
- providers.go: Provider listing, retrieval, and models
- admin.go: Administrative operations \(update, stats\)
- health.go: Health and readiness checks
- realtime.go: WebSocket and SSE real\-time updates
- openapi.go: OpenAPI 3.1 specification endpoints

All handlers follow a consistent pattern:

1. Validate input
2. Check cache \(if applicable\)
3. Query catalog/data source
4. Transform data
5. Cache result \(if applicable\)
6. Return response

Handlers use dependency injection for testability and receive all dependencies through the Handlers struct.

Package handlers provides HTTP request handlers for the Starmap API.

## Index

- [type DateRange](<#DateRange>)
- [type Handlers](<#Handlers>)
  - [func New\(app application.Application, cache \*cache.Cache, broker \*events.Broker, wsHub \*ws.Hub, sseBroadcaster \*sse.Broadcaster, upgrader websocket.Upgrader, logger \*zerolog.Logger\) \*Handlers](<#New>)
  - [func \(h \*Handlers\) HandleGetModel\(w http.ResponseWriter, \_ \*http.Request, modelID string\)](<#Handlers.HandleGetModel>)
  - [func \(h \*Handlers\) HandleGetProvider\(w http.ResponseWriter, \_ \*http.Request, providerID string\)](<#Handlers.HandleGetProvider>)
  - [func \(h \*Handlers\) HandleGetProviderModels\(w http.ResponseWriter, \_ \*http.Request, providerID string\)](<#Handlers.HandleGetProviderModels>)
  - [func \(h \*Handlers\) HandleHealth\(w http.ResponseWriter, \_ \*http.Request\)](<#Handlers.HandleHealth>)
  - [func \(h \*Handlers\) HandleListModels\(w http.ResponseWriter, r \*http.Request\)](<#Handlers.HandleListModels>)
  - [func \(h \*Handlers\) HandleListProviders\(w http.ResponseWriter, \_ \*http.Request\)](<#Handlers.HandleListProviders>)
  - [func \(h \*Handlers\) HandleOpenAPIJSON\(w http.ResponseWriter, \_ \*http.Request\)](<#Handlers.HandleOpenAPIJSON>)
  - [func \(h \*Handlers\) HandleOpenAPIYAML\(w http.ResponseWriter, \_ \*http.Request\)](<#Handlers.HandleOpenAPIYAML>)
  - [func \(h \*Handlers\) HandleReady\(w http.ResponseWriter, \_ \*http.Request\)](<#Handlers.HandleReady>)
  - [func \(h \*Handlers\) HandleSSE\(w http.ResponseWriter, r \*http.Request\)](<#Handlers.HandleSSE>)
  - [func \(h \*Handlers\) HandleSearchModels\(w http.ResponseWriter, r \*http.Request\)](<#Handlers.HandleSearchModels>)
  - [func \(h \*Handlers\) HandleStats\(w http.ResponseWriter, r \*http.Request\)](<#Handlers.HandleStats>)
  - [func \(h \*Handlers\) HandleUpdate\(w http.ResponseWriter, r \*http.Request\)](<#Handlers.HandleUpdate>)
  - [func \(h \*Handlers\) HandleWebSocket\(w http.ResponseWriter, r \*http.Request\)](<#Handlers.HandleWebSocket>)
- [type IntRange](<#IntRange>)
- [type SearchModalities](<#SearchModalities>)
- [type SearchRequest](<#SearchRequest>)


<a name="DateRange"></a>
## type [DateRange](<https://github.com/agentstation/starmap/blob/master/internal/server/handlers/models.go#L161-L164>)

DateRange represents a date range filter.

```go
type DateRange struct {
    After  string `json:"after,omitempty"`
    Before string `json:"before,omitempty"`
}
```

<a name="Handlers"></a>
## type [Handlers](<https://github.com/agentstation/starmap/blob/master/internal/server/handlers/handlers.go#L16-L24>)

Handlers provides access to all HTTP handlers.

```go
type Handlers struct {
    // contains filtered or unexported fields
}
```

<a name="New"></a>
### func [New](<https://github.com/agentstation/starmap/blob/master/internal/server/handlers/handlers.go#L27-L35>)

```go
func New(app application.Application, cache *cache.Cache, broker *events.Broker, wsHub *ws.Hub, sseBroadcaster *sse.Broadcaster, upgrader websocket.Upgrader, logger *zerolog.Logger) *Handlers
```

New creates a new Handlers instance.

<a name="Handlers.HandleGetModel"></a>
### func \(\*Handlers\) [HandleGetModel](<https://github.com/agentstation/starmap/blob/master/internal/server/handlers/models.go#L103>)

```go
func (h *Handlers) HandleGetModel(w http.ResponseWriter, _ *http.Request, modelID string)
```

HandleGetModel handles GET /api/v1/models/\{id\}. @Summary Get model by ID @Description Retrieve detailed information about a specific model @Tags models @Accept json @Produce json @Param id path string true "Model ID" @Success 200 \{object\} response.Response\{data=catalogs.Model\} @Failure 404 \{object\} response.Response\{error=response.Error\} @Failure 500 \{object\} response.Response\{error=response.Error\} @Security ApiKeyAuth @Router /api/v1/models/\{id\} \[get\].

<a name="Handlers.HandleGetProvider"></a>
### func \(\*Handlers\) [HandleGetProvider](<https://github.com/agentstation/starmap/blob/master/internal/server/handlers/providers.go#L80>)

```go
func (h *Handlers) HandleGetProvider(w http.ResponseWriter, _ *http.Request, providerID string)
```

HandleGetProvider handles GET /api/v1/providers/\{id\}. @Summary Get provider by ID @Description Retrieve detailed information about a specific provider @Tags providers @Accept json @Produce json @Param id path string true "Provider ID" @Success 200 \{object\} response.Response\{data=catalogs.Provider\} @Failure 404 \{object\} response.Response\{error=response.Error\} @Failure 500 \{object\} response.Response\{error=response.Error\} @Security ApiKeyAuth @Router /api/v1/providers/\{id\} \[get\].

<a name="Handlers.HandleGetProviderModels"></a>
### func \(\*Handlers\) [HandleGetProviderModels](<https://github.com/agentstation/starmap/blob/master/internal/server/handlers/providers.go#L120>)

```go
func (h *Handlers) HandleGetProviderModels(w http.ResponseWriter, _ *http.Request, providerID string)
```

HandleGetProviderModels handles GET /api/v1/providers/\{id\}/models. @Summary Get provider models @Description List all models for a specific provider @Tags providers @Accept json @Produce json @Param id path string true "Provider ID" @Success 200 \{object\} response.Response\{data=object\} @Failure 404 \{object\} response.Response\{error=response.Error\} @Failure 500 \{object\} response.Response\{error=response.Error\} @Security ApiKeyAuth @Router /api/v1/providers/\{id\}/models \[get\].

<a name="Handlers.HandleHealth"></a>
### func \(\*Handlers\) [HandleHealth](<https://github.com/agentstation/starmap/blob/master/internal/server/handlers/health.go#L17>)

```go
func (h *Handlers) HandleHealth(w http.ResponseWriter, _ *http.Request)
```

HandleHealth handles GET /api/v1/health. @Summary Health check @Description Health check endpoint \(liveness probe\) @Tags health @Accept json @Produce json @Success 200 \{object\} response.Response\{data=object\} @Router /api/v1/health \[get\].

<a name="Handlers.HandleListModels"></a>
### func \(\*Handlers\) [HandleListModels](<https://github.com/agentstation/starmap/blob/master/internal/server/handlers/models.go#L38>)

```go
func (h *Handlers) HandleListModels(w http.ResponseWriter, r *http.Request)
```

HandleListModels handles GET /api/v1/models. @Summary List models @Description List all models with optional filtering @Tags models @Accept json @Produce json @Param id query string false "Filter by exact model ID" @Param name query string false "Filter by exact model name \(case\-insensitive\)" @Param name\_contains query string false "Filter by partial model name match" @Param provider query string false "Filter by provider ID" @Param modality\_input query string false "Filter by input modality \(comma\-separated\)" @Param modality\_output query string false "Filter by output modality \(comma\-separated\)" @Param feature query string false "Filter by feature \(streaming, tool\_calls, etc.\)" @Param tag query string false "Filter by tag \(comma\-separated\)" @Param open\_weights query boolean false "Filter by open weights status" @Param min\_context query integer false "Minimum context window size" @Param max\_context query integer false "Maximum context window size" @Param sort query string false "Sort field \(id, name, release\_date, context\_window, created\_at, updated\_at\)" @Param order query string false "Sort order \(asc, desc\)" @Param limit query integer false "Maximum number of results \(default: 100, max: 1000\)" @Param offset query integer false "Result offset for pagination" @Success 200 \{object\} response.Response\{data=object\} @Failure 400 \{object\} response.Response\{error=response.Error\} @Failure 500 \{object\} response.Response\{error=response.Error\} @Security ApiKeyAuth @Router /api/v1/models \[get\].

<a name="Handlers.HandleListProviders"></a>
### func \(\*Handlers\) [HandleListProviders](<https://github.com/agentstation/starmap/blob/master/internal/server/handlers/providers.go#L21>)

```go
func (h *Handlers) HandleListProviders(w http.ResponseWriter, _ *http.Request)
```

HandleListProviders handles GET /api/v1/providers. @Summary List providers @Description List all providers @Tags providers @Accept json @Produce json @Success 200 \{object\} response.Response\{data=object\} @Failure 500 \{object\} response.Response\{error=response.Error\} @Security ApiKeyAuth @Router /api/v1/providers \[get\].

<a name="Handlers.HandleOpenAPIJSON"></a>
### func \(\*Handlers\) [HandleOpenAPIJSON](<https://github.com/agentstation/starmap/blob/master/internal/server/handlers/openapi.go#L16>)

```go
func (h *Handlers) HandleOpenAPIJSON(w http.ResponseWriter, _ *http.Request)
```

HandleOpenAPIJSON serves the embedded OpenAPI 3.1 specification in JSON format. @Summary Get OpenAPI specification \(JSON\) @Description Returns the OpenAPI 3.1 specification for this API in JSON format @Tags meta @Produce json @Success 200 \{object\} object "OpenAPI 3.1 specification" @Router /api/v1/openapi.json \[get\].

<a name="Handlers.HandleOpenAPIYAML"></a>
### func \(\*Handlers\) [HandleOpenAPIYAML](<https://github.com/agentstation/starmap/blob/master/internal/server/handlers/openapi.go#L29>)

```go
func (h *Handlers) HandleOpenAPIYAML(w http.ResponseWriter, _ *http.Request)
```

HandleOpenAPIYAML serves the embedded OpenAPI 3.1 specification in YAML format. @Summary Get OpenAPI specification \(YAML\) @Description Returns the OpenAPI 3.1 specification for this API in YAML format @Tags meta @Produce application/x\-yaml @Success 200 \{string\} string "OpenAPI 3.1 specification" @Router /api/v1/openapi.yaml \[get\].

<a name="Handlers.HandleReady"></a>
### func \(\*Handlers\) [HandleReady](<https://github.com/agentstation/starmap/blob/master/internal/server/handlers/health.go#L34>)

```go
func (h *Handlers) HandleReady(w http.ResponseWriter, _ *http.Request)
```

HandleReady handles GET /api/v1/ready. @Summary Readiness check @Description Readiness check including cache and data source status @Tags health @Accept json @Produce json @Success 200 \{object\} response.Response\{data=object\} @Failure 503 \{object\} response.Response\{error=response.Error\} @Router /api/v1/ready \[get\].

<a name="Handlers.HandleSSE"></a>
### func \(\*Handlers\) [HandleSSE](<https://github.com/agentstation/starmap/blob/master/internal/server/handlers/realtime.go#L43>)

```go
func (h *Handlers) HandleSSE(w http.ResponseWriter, r *http.Request)
```

HandleSSE handles Server\-Sent Events at /api/v1/updates/stream. @Summary SSE updates stream @Description Server\-Sent Events stream for catalog change notifications @Tags updates @Produce text/event\-stream @Success 200 "Event stream" @Router /api/v1/updates/stream \[get\].

<a name="Handlers.HandleSearchModels"></a>
### func \(\*Handlers\) [HandleSearchModels](<https://github.com/agentstation/starmap/blob/master/internal/server/handlers/models.go#L178>)

```go
func (h *Handlers) HandleSearchModels(w http.ResponseWriter, r *http.Request)
```

HandleSearchModels handles POST /api/v1/models/search. @Summary Search models @Description Advanced search with multiple criteria @Tags models @Accept json @Produce json @Param search body SearchRequest true "Search criteria" @Success 200 \{object\} response.Response\{data=object\} @Failure 400 \{object\} response.Response\{error=response.Error\} @Failure 500 \{object\} response.Response\{error=response.Error\} @Security ApiKeyAuth @Router /api/v1/models/search \[post\].

<a name="Handlers.HandleStats"></a>
### func \(\*Handlers\) [HandleStats](<https://github.com/agentstation/starmap/blob/master/internal/server/handlers/admin.go#L74>)

```go
func (h *Handlers) HandleStats(w http.ResponseWriter, r *http.Request)
```

HandleStats handles GET /api/v1/stats. @Summary Catalog statistics @Description Get comprehensive server and catalog statistics @Tags admin @Accept json @Produce json @Success 200 \{object\} response.Response\{data=object\} @Failure 500 \{object\} response.Response\{error=response.Error\} @Security ApiKeyAuth @Router /api/v1/stats \[get\].

<a name="Handlers.HandleUpdate"></a>
### func \(\*Handlers\) [HandleUpdate](<https://github.com/agentstation/starmap/blob/master/internal/server/handlers/admin.go#L25>)

```go
func (h *Handlers) HandleUpdate(w http.ResponseWriter, r *http.Request)
```

HandleUpdate handles POST /api/v1/update. @Summary Trigger catalog update @Description Manually trigger catalog synchronization @Tags admin @Accept json @Produce json @Param provider query string false "Update specific provider only" @Success 200 \{object\} response.Response\{data=object\} @Failure 500 \{object\} response.Response\{error=response.Error\} @Security ApiKeyAuth @Router /api/v1/update \[post\].

<a name="Handlers.HandleWebSocket"></a>
### func \(\*Handlers\) [HandleWebSocket](<https://github.com/agentstation/starmap/blob/master/internal/server/handlers/realtime.go#L17>)

```go
func (h *Handlers) HandleWebSocket(w http.ResponseWriter, r *http.Request)
```

HandleWebSocket handles WebSocket connections at /api/v1/updates/ws. @Summary WebSocket updates @Description WebSocket connection for real\-time catalog updates @Tags updates @Success 101 "Switching Protocols" @Router /api/v1/updates/ws \[get\].

<a name="IntRange"></a>
## type [IntRange](<https://github.com/agentstation/starmap/blob/master/internal/server/handlers/models.go#L155-L158>)

IntRange represents an integer range filter.

```go
type IntRange struct {
    Min int64 `json:"min,omitempty"`
    Max int64 `json:"max,omitempty"`
}
```

<a name="SearchModalities"></a>
## type [SearchModalities](<https://github.com/agentstation/starmap/blob/master/internal/server/handlers/models.go#L149-L152>)

SearchModalities specifies modality requirements.

```go
type SearchModalities struct {
    Input  []string `json:"input,omitempty"`
    Output []string `json:"output,omitempty"`
}
```

<a name="SearchRequest"></a>
## type [SearchRequest](<https://github.com/agentstation/starmap/blob/master/internal/server/handlers/models.go#L132-L146>)

SearchRequest represents the POST /api/v1/models/search request body.

```go
type SearchRequest struct {
    IDs           []string          `json:"ids,omitempty"`
    NameContains  string            `json:"name_contains,omitempty"`
    Provider      string            `json:"provider,omitempty"`
    Modalities    *SearchModalities `json:"modalities,omitempty"`
    Features      map[string]bool   `json:"features,omitempty"`
    Tags          []string          `json:"tags,omitempty"`
    OpenWeights   *bool             `json:"open_weights,omitempty"`
    ContextWindow *IntRange         `json:"context_window,omitempty"`
    OutputTokens  *IntRange         `json:"output_tokens,omitempty"`
    ReleaseDate   *DateRange        `json:"release_date,omitempty"`
    Sort          string            `json:"sort,omitempty"`
    Order         string            `json:"order,omitempty"`
    MaxResults    int               `json:"max_results,omitempty"`
}
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
