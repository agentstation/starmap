<!-- gomarkdoc:embed:start -->

<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# websocket

```go
import "github.com/agentstation/starmap/internal/server/websocket"
```

Package websocket provides WebSocket support for real\-time catalog updates.

## Index

- [type Client](<#Client>)
  - [func NewClient\(id string, hub \*Hub, conn \*websocket.Conn\) \*Client](<#NewClient>)
  - [func \(c \*Client\) ReadPump\(\)](<#Client.ReadPump>)
  - [func \(c \*Client\) WritePump\(\)](<#Client.WritePump>)
- [type Hub](<#Hub>)
  - [func NewHub\(logger \*zerolog.Logger\) \*Hub](<#NewHub>)
  - [func \(h \*Hub\) Broadcast\(message Message\)](<#Hub.Broadcast>)
  - [func \(h \*Hub\) ClientCount\(\) int](<#Hub.ClientCount>)
  - [func \(h \*Hub\) Run\(\)](<#Hub.Run>)
- [type Message](<#Message>)


<a name="Client"></a>
## type [Client](<https://github.com/agentstation/starmap/blob/master/internal/server/websocket/hub.go#L99-L104>)

Client represents a WebSocket client connection.

```go
type Client struct {
    // contains filtered or unexported fields
}
```

<a name="NewClient"></a>
### func [NewClient](<https://github.com/agentstation/starmap/blob/master/internal/server/websocket/hub.go#L107>)

```go
func NewClient(id string, hub *Hub, conn *websocket.Conn) *Client
```

NewClient creates a new WebSocket client.

<a name="Client.ReadPump"></a>
### func \(\*Client\) [ReadPump](<https://github.com/agentstation/starmap/blob/master/internal/server/websocket/hub.go#L131>)

```go
func (c *Client) ReadPump()
```

ReadPump pumps messages from the WebSocket connection to the hub.

<a name="Client.WritePump"></a>
### func \(\*Client\) [WritePump](<https://github.com/agentstation/starmap/blob/master/internal/server/websocket/hub.go#L156>)

```go
func (c *Client) WritePump()
```

WritePump pumps messages from the hub to the WebSocket connection.

<a name="Hub"></a>
## type [Hub](<https://github.com/agentstation/starmap/blob/master/internal/server/websocket/hub.go#L14-L21>)

Hub maintains active WebSocket connections and broadcasts messages.

```go
type Hub struct {
    // contains filtered or unexported fields
}
```

<a name="NewHub"></a>
### func [NewHub](<https://github.com/agentstation/starmap/blob/master/internal/server/websocket/hub.go#L24>)

```go
func NewHub(logger *zerolog.Logger) *Hub
```

NewHub creates a new WebSocket hub.

<a name="Hub.Broadcast"></a>
### func \(\*Hub\) [Broadcast](<https://github.com/agentstation/starmap/blob/master/internal/server/websocket/hub.go#L76>)

```go
func (h *Hub) Broadcast(message Message)
```

Broadcast sends a message to all connected clients.

<a name="Hub.ClientCount"></a>
### func \(\*Hub\) [ClientCount](<https://github.com/agentstation/starmap/blob/master/internal/server/websocket/hub.go#L85>)

```go
func (h *Hub) ClientCount() int
```

ClientCount returns the number of connected clients.

<a name="Hub.Run"></a>
### func \(\*Hub\) [Run](<https://github.com/agentstation/starmap/blob/master/internal/server/websocket/hub.go#L35>)

```go
func (h *Hub) Run()
```

Run starts the hub's main loop. Should be called in a goroutine.

<a name="Message"></a>
## type [Message](<https://github.com/agentstation/starmap/blob/master/internal/server/websocket/hub.go#L92-L96>)

Message represents a WebSocket message.

```go
type Message struct {
    Type      string    `json:"type"`
    Timestamp time.Time `json:"timestamp"`
    Data      any       `json:"data"`
}
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)


<!-- gomarkdoc:embed:end -->