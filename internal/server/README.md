<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# server

```go
import "github.com/agentstation/starmap/internal/server"
```

Package server provides HTTP server implementation for the Starmap API.

This file contains general API documentation annotations for Swag/OpenAPI generation. These annotations describe the overall API \(title, version, security, etc.\) while individual endpoint annotations live in the handler files.

Package server provides HTTP server implementation for the Starmap API.

The server package implements a clean, layered architecture following Go best practices:

- Server: Core server struct with lifecycle management
- Config: Server configuration with sensible defaults
- Router: Route registration and middleware chain
- Handlers: HTTP request handlers organized by domain

The architecture follows the pattern: CLI → App → Server → Router → Handlers

Usage:

```
cfg := server.DefaultConfig()
cfg.Port = 8080

srv, err := server.New(app, cfg)
if err != nil {
    log.Fatal(err)
}

srv.Start() // Start background services
http.ListenAndServe(":8080", srv.Handler())
```

Package server provides HTTP server implementation for the Starmap API.

## Index

- [type Config](<#Config>)
  - [func DefaultConfig\(\) Config](<#DefaultConfig>)
- [type Server](<#Server>)
  - [func New\(app application.Application, cfg Config\) \(\*Server, error\)](<#New>)
  - [func \(s \*Server\) Broker\(\) \*events.Broker](<#Server.Broker>)
  - [func \(s \*Server\) Cache\(\) \*cache.Cache](<#Server.Cache>)
  - [func \(s \*Server\) Handler\(\) http.Handler](<#Server.Handler>)
  - [func \(s \*Server\) SSEBroadcaster\(\) \*sse.Broadcaster](<#Server.SSEBroadcaster>)
  - [func \(s \*Server\) Shutdown\(ctx context.Context\) error](<#Server.Shutdown>)
  - [func \(s \*Server\) Start\(\)](<#Server.Start>)
  - [func \(s \*Server\) StartTime\(\) time.Time](<#Server.StartTime>)
  - [func \(s \*Server\) WSHub\(\) \*ws.Hub](<#Server.WSHub>)


<a name="Config"></a>
## type [Config](<https://github.com/agentstation/starmap/blob/master/internal/server/config.go#L6-L33>)

Config holds server configuration.

```go
type Config struct {
    // Server settings
    Host string
    Port int

    // API settings
    PathPrefix string

    // CORS settings
    CORSEnabled bool
    CORSOrigins []string

    // Authentication settings
    AuthEnabled bool
    AuthHeader  string

    // Performance settings
    RateLimit int // Requests per minute per IP (0 to disable)
    CacheTTL  time.Duration

    // HTTP timeouts
    ReadTimeout  time.Duration
    WriteTimeout time.Duration
    IdleTimeout  time.Duration

    // Features
    MetricsEnabled bool
}
```

<a name="DefaultConfig"></a>
### func [DefaultConfig](<https://github.com/agentstation/starmap/blob/master/internal/server/config.go#L36>)

```go
func DefaultConfig() Config
```

DefaultConfig returns a Config with sensible defaults.

<a name="Server"></a>
## type [Server](<https://github.com/agentstation/starmap/blob/master/internal/server/server.go#L22-L34>)

Server holds the HTTP server state and dependencies.

```go
type Server struct {
    // contains filtered or unexported fields
}
```

<a name="New"></a>
### func [New](<https://github.com/agentstation/starmap/blob/master/internal/server/server.go#L37>)

```go
func New(app application.Application, cfg Config) (*Server, error)
```

New creates a new server instance with the given configuration.

<a name="Server.Broker"></a>
### func \(\*Server\) [Broker](<https://github.com/agentstation/starmap/blob/master/internal/server/server.go#L204>)

```go
func (s *Server) Broker() *events.Broker
```

Broker returns the event broker for publishing events.

<a name="Server.Cache"></a>
### func \(\*Server\) [Cache](<https://github.com/agentstation/starmap/blob/master/internal/server/server.go#L189>)

```go
func (s *Server) Cache() *cache.Cache
```

Cache returns the server's cache instance.

<a name="Server.Handler"></a>
### func \(\*Server\) [Handler](<https://github.com/agentstation/starmap/blob/master/internal/server/server.go#L163>)

```go
func (s *Server) Handler() http.Handler
```

Handler returns the configured http.Handler with middleware chain applied.

<a name="Server.SSEBroadcaster"></a>
### func \(\*Server\) [SSEBroadcaster](<https://github.com/agentstation/starmap/blob/master/internal/server/server.go#L199>)

```go
func (s *Server) SSEBroadcaster() *sse.Broadcaster
```

SSEBroadcaster returns the SSE broadcaster.

<a name="Server.Shutdown"></a>
### func \(\*Server\) [Shutdown](<https://github.com/agentstation/starmap/blob/master/internal/server/server.go#L168>)

```go
func (s *Server) Shutdown(ctx context.Context) error
```

Shutdown gracefully shuts down background services.

<a name="Server.Start"></a>
### func \(\*Server\) [Start](<https://github.com/agentstation/starmap/blob/master/internal/server/server.go#L147>)

```go
func (s *Server) Start()
```

Start starts background services \(broker, WebSocket hub, SSE broadcaster\).

<a name="Server.StartTime"></a>
### func \(\*Server\) [StartTime](<https://github.com/agentstation/starmap/blob/master/internal/server/server.go#L209>)

```go
func (s *Server) StartTime() time.Time
```

StartTime returns the server start time for uptime calculations.

<a name="Server.WSHub"></a>
### func \(\*Server\) [WSHub](<https://github.com/agentstation/starmap/blob/master/internal/server/server.go#L194>)

```go
func (s *Server) WSHub() *ws.Hub
```

WSHub returns the WebSocket hub.

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
